{"version":3,"sources":["../src/cremalab/assets/scripts/main.js"],"names":["$","bindCancel","bindContactForm","bindSidebar","playVideo","setupScrollWatcher","length","each","i","el","$el","window","scrollWatcher","ScrollWatcher","addItem","parent","on","e","stopPropagation","preventDefault","removeClass","bind","trigger","hasClass","off","$form","data","status","xhr","message_json","name","find","remove","parseJSON","responseText","reset","prepend","error","$err_list","errs","j","len","markup","results","empty","push","append","play","document","Modernizr","touch","addClass","hljs","highlightBlock","toggleClass","csstransitions","jQuery"],"mappings":"CAAA,SAAAA,GAEA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,CAEAA,GAAA,WACA,MAAAL,GAAA,kBAAAM,OACAN,EAAA,kBAAAO,KAAA,SAAAC,EAAAC,GACA,GAAAC,EAKA,OAJAA,GAAAV,EAAAS,GACAE,OAAAC,gBACAD,OAAAC,cAAA,GAAAC,gBAEAF,OAAAC,cAAAE,QAAAJ,EAAAK,YAPA,QAYAd,EAAA,WACA,MAAAD,GAAA,6BAAAgB,GAAA,QAAA,SAAAC,GAIA,MAHAA,GAAAC,kBACAD,EAAAE,iBACAnB,EAAA,wBAAAoB,YAAA,QACApB,EAAA,6BAAAoB,YAAA,YAIAjB,EAAA,WACAH,EAAA,wBAAAqB,KAAA,kFAAA,SAAAJ,GACA,MAAAjB,GAAAW,QAAAW,QAAA,yBAEAtB,EAAAW,QAAAK,GAAA,sBAAA,WACA,MAAAhB,GAAA,wBAAAuB,SAAA,QACAtB,IAEAD,EAAA,wBAAAwB,IAAA,YAKAtB,EAAA,WACA,GAAAuB,EAEA,OADAA,GAAAzB,EAAA,gBACAyB,EAAAT,GAAA,eAAA,SAAAC,EAAAS,EAAAC,EAAAC,GACA,GAAAC,GAAAC,CAKA,OAJAL,GAAAM,KAAA,gBAAAC,SACAH,EAAA7B,EAAAiC,UAAAL,EAAAM,cACAJ,EAAAD,EAAAC,KACAL,EAAA,GAAAU,QACAV,EAAAW,QAAA,iCAAAN,EAAA,YACAT,KAAA,aAAA,SAAAJ,EAAAW,EAAAD,EAAAU,GACA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAUA,KATAJ,EAAAvC,EAAAiC,UAAAL,EAAAM,cACAI,EAAAb,EAAAM,KAAA,gBACAN,EAAAM,KAAA,gBAAAzB,OACAgC,EAAAM,SAEAN,EAAAtC,EAAA,iCACAyB,EAAAW,QAAAE,IAEAK,KACAH,EAAA,EAAAC,EAAAF,EAAAjC,OAAAmC,EAAAD,EAAAA,IACAH,EAAAE,EAAAC,GACAE,EAAA,OAAAL,EAAA,QACAM,EAAAE,KAAAP,EAAAQ,OAAAJ,GAEA,OAAAC,MAIAvC,EAAA,WACA,MAAAJ,GAAA,oBAAAM,OACAN,EAAA,0BAAA,GAAA+C,OADA,QAKA/C,EAAAgD,UAAAhC,GAAA,QAAA,WAeA,MAdAiC,WAAAC,OACAlD,EAAA,QAAAmD,SAAA,SAEA/C,IAEAJ,EAAA,YAAAO,KAAA,SAAAC,EAAAS,GACA,MAAAmC,MAAAC,eAAApC,KAEAjB,EAAA,kBAAAgB,GAAA,QAAA,WAEA,MADAhB,GAAA,wBAAAsD,YAAA,QACAtD,EAAA,6BAAAsD,YAAA,WAEApD,IACAF,EAAAW,QAAAa,IAAA,uBACAyB,UAAAM,eACApD,IADA,UAKAqD","file":"main.js","sourcesContent":["(function($) {\n\n  var bindCancel, bindContactForm, bindSidebar, playVideo, setupScrollWatcher;\n\n  setupScrollWatcher = function() {\n    if ($(\".work-showcase\").length) {\n      return $(\".work-showcase\").each(function(i, el) {\n        var $el;\n        $el = $(el);\n        if (!window.scrollWatcher) {\n          window.scrollWatcher = new ScrollWatcher();\n        }\n        return window.scrollWatcher.addItem($el.parent());\n      });\n    }\n  };\n\n  bindCancel = function() {\n    return $(\".layout-main-wrapper.open\").on('click', function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      $('.layout-main-wrapper').removeClass('open');\n      return $('.menu_bar, .sideBarToggle').removeClass('close');\n    });\n  };\n\n  bindSidebar = function() {\n    $('.layout-main-wrapper').bind('transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd', function(e) {\n      return $(window).trigger('nav-transition-done');\n    });\n    $(window).on('nav-transition-done', function() {\n      if ($('.layout-main-wrapper').hasClass('open')) {\n        return bindCancel();\n      } else {\n        return $(\".layout-main-wrapper\").off('click');\n      }\n    });\n  };\n\n  bindContactForm = function() {\n    var $form;\n    $form = $(\"#new_message\");\n    return $form.on(\"ajax:success\", function(e, data, status, xhr) {\n      var message_json, name;\n      $form.find(\".form-errors\").remove();\n      message_json = $.parseJSON(xhr.responseText);\n      name = message_json.name;\n      $form[0].reset();\n      return $form.prepend(\"<h4>Thanks for contacting us, \" + name + \".</h4>\");\n    }).bind(\"ajax:error\", function(e, xhr, status, error) {\n      var $err_list, errs, j, len, markup, results;\n      errs = $.parseJSON(xhr.responseText);\n      $err_list = $form.find(\".form-errors\");\n      if ($form.find(\".form-errors\").length) {\n        $err_list.empty();\n      } else {\n        $err_list = $(\"<ul class='form-errors'></ul>\");\n        $form.prepend($err_list);\n      }\n      results = [];\n      for (j = 0, len = errs.length; j < len; j++) {\n        error = errs[j];\n        markup = \"<li>\" + error + \"</li>\";\n        results.push($err_list.append(markup));\n      }\n      return results;\n    });\n  };\n\n  playVideo = function() {\n    if ($(\".videoBackground\").length) {\n      return $(\".videoBackground video\")[0].play();\n    }\n  };\n\n  $(document).on('ready', function() {\n    if (Modernizr.touch) {\n      $('body').addClass('touch');\n    }\n    playVideo();\n    //setupScrollWatcher();\n    $('pre code').each(function(i, e) {\n      return hljs.highlightBlock(e);\n    });\n    $('.sideBarToggle').on('click', function() {\n      $('.layout-main-wrapper').toggleClass('open');\n      return $('.menu_bar, .sideBarToggle').toggleClass('close');\n    });\n    bindContactForm();\n    $(window).off('nav-transition-done');\n    if (Modernizr.csstransitions) {\n      return bindSidebar();\n    }\n  });\n\n})(jQuery);\n"],"sourceRoot":"/source/"}